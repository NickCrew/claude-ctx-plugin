<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>TUI Next Level Visual Enhancements | Claude CTX Plugin</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="TUI Next Level Visual Enhancements" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Comprehensive context management plugin for Claude Code" />
<meta property="og:description" content="Comprehensive context management plugin for Claude Code" />
<link rel="canonical" href="https://nickcrew.github.io/claude-ctx-plugin/archive/completed-tasks/TUI_NEXT_LEVEL_PLAN.html" />
<meta property="og:url" content="https://nickcrew.github.io/claude-ctx-plugin/archive/completed-tasks/TUI_NEXT_LEVEL_PLAN.html" />
<meta property="og:site_name" content="Claude CTX Plugin" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="TUI Next Level Visual Enhancements" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Comprehensive context management plugin for Claude Code","headline":"TUI Next Level Visual Enhancements","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://nickcrew.github.io/claude-ctx-plugin/assets/images/hero.png"}},"url":"https://nickcrew.github.io/claude-ctx-plugin/archive/completed-tasks/TUI_NEXT_LEVEL_PLAN.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/claude-ctx-plugin/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://nickcrew.github.io/claude-ctx-plugin/feed.xml" title="Claude CTX Plugin" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/claude-ctx-plugin/">Claude CTX Plugin</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/claude-ctx-plugin/">Overview</a><a class="page-link" href="/claude-ctx-plugin/tutorials/">Tutorials</a><a class="page-link" href="/claude-ctx-plugin/guides/getting-started.html">Getting Started</a><a class="page-link" href="/claude-ctx-plugin/guides/development/architecture.html">Architecture</a><a class="page-link" href="/claude-ctx-plugin/guides/agents.html">Agents</a><a class="page-link" href="/claude-ctx-plugin/guides/skills.html">Skills</a><a class="page-link" href="/claude-ctx-plugin/guides/development/model-optimization.html">Model Optimization</a><a class="page-link" href="/claude-ctx-plugin/guides/commands.html">Command Reference</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">TUI Next Level Visual Enhancements</h1>
  </header>

  <div class="post-content">
    <h1 id="tui-next-level-visual-enhancements">TUI Next Level Visual Enhancements</h1>
<h2 id="professional--slick--surprising">Professional + Slick + Surprising</h2>

<p><strong>Goal</strong>: Transform the TUI into a best-in-class terminal interface with features that delight users.</p>

<hr />

<h2 id="-phase-1-advanced-layout-system-3-4-hours">üöÄ Phase 1: Advanced Layout System (3-4 hours)</h2>

<h3 id="11-split-pane-detail-view">1.1 Split-Pane Detail View</h3>
<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">claude_ctx_py/tui_layouts.py</code> (new)</p>

<p><strong>The Surprise</strong>: Press <code class="language-plaintext highlighter-rouge">D</code> to toggle a detail panel that shows rich info about the selected item.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">textual.containers</span> <span class="kn">import</span> <span class="n">Horizontal</span><span class="p">,</span> <span class="n">Vertical</span>
<span class="kn">from</span> <span class="nn">textual.widgets</span> <span class="kn">import</span> <span class="n">Static</span>
<span class="kn">from</span> <span class="nn">rich.panel</span> <span class="kn">import</span> <span class="n">Panel</span>
<span class="kn">from</span> <span class="nn">rich.syntax</span> <span class="kn">import</span> <span class="n">Syntax</span>

<span class="k">class</span> <span class="nc">DetailPanel</span><span class="p">(</span><span class="n">Vertical</span><span class="p">):</span>
    <span class="s">"""Sliding detail panel with rich content."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">"detail-panel"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">visible</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">show_agent_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>
        <span class="s">"""Show rich agent details."""</span>
        <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"""
[bold cyan]Agent Details[/bold cyan]

[bold]Name:[/bold] </span><span class="si">{</span><span class="n">agent</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">
[bold]Status:[/bold] </span><span class="si">{</span><span class="n">StatusIcon</span><span class="p">.</span><span class="n">active</span><span class="p">()</span> <span class="k">if</span> <span class="n">agent</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s">'active'</span> <span class="k">else</span> <span class="n">StatusIcon</span><span class="p">.</span><span class="n">inactive</span><span class="p">()</span><span class="si">}</span><span class="s">
[bold]Category:[/bold] </span><span class="si">{</span><span class="n">agent</span><span class="p">.</span><span class="n">category</span><span class="si">}</span><span class="s">
[bold]Tier:[/bold] </span><span class="si">{</span><span class="n">agent</span><span class="p">.</span><span class="n">tier</span><span class="si">}</span><span class="s">

[bold]Files:[/bold] </span><span class="si">{</span><span class="n">agent</span><span class="p">.</span><span class="n">file_count</span><span class="si">}</span><span class="s"> files
[bold]Dependencies:[/bold] </span><span class="si">{</span><span class="n">Format</span><span class="p">.</span><span class="n">list_items</span><span class="p">(</span><span class="n">agent</span><span class="p">.</span><span class="n">dependencies</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="si">}</span><span class="s">
[bold]Description:[/bold]
</span><span class="si">{</span><span class="n">agent</span><span class="p">.</span><span class="n">description</span><span class="si">}</span><span class="s">

[dim]Press D to close[/dim]
        """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">border_style</span><span class="o">=</span><span class="s">"cyan"</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">visible</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">show_mode_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="s">"""Show rich mode details with activation triggers."""</span>
        <span class="c1"># Parse the mode file to show activation triggers, examples, etc.
</span>        <span class="n">content</span> <span class="o">=</span> <span class="n">mode</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">read_text</span><span class="p">()</span>

        <span class="c1"># Syntax highlight the markdown
</span>        <span class="n">syntax</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s">"markdown"</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s">"monokai"</span><span class="p">,</span> <span class="n">line_numbers</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="n">syntax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s">"Mode: </span><span class="si">{</span><span class="n">mode</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">border_style</span><span class="o">=</span><span class="s">"magenta"</span><span class="p">))</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">visible</span> <span class="o">=</span> <span class="bp">True</span>
</code></pre></div></div>

<p><strong>Integration</strong>: Add to main layout with sliding animation.</p>

<h3 id="12-command-palette">1.2 Command Palette</h3>
<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">claude_ctx_py/tui_command_palette.py</code> (new)</p>

<p><strong>The Surprise</strong>: Press <code class="language-plaintext highlighter-rouge">Ctrl+P</code> for fuzzy search across all items (agents, rules, modes, skills).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">textual.widgets</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">ListView</span><span class="p">,</span> <span class="n">ListItem</span>
<span class="kn">from</span> <span class="nn">textual.screen</span> <span class="kn">import</span> <span class="n">ModalScreen</span>
<span class="kn">from</span> <span class="nn">fuzzywuzzy</span> <span class="kn">import</span> <span class="n">fuzz</span>  <span class="c1"># or use difflib
</span>
<span class="k">class</span> <span class="nc">CommandPalette</span><span class="p">(</span><span class="n">ModalScreen</span><span class="p">):</span>
    <span class="s">"""Fuzzy searchable command palette - VSCode style."""</span>

    <span class="n">BINDINGS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">"ctrl+p"</span><span class="p">,</span> <span class="s">"toggle_palette"</span><span class="p">,</span> <span class="s">"Command Palette"</span><span class="p">),</span>
        <span class="p">(</span><span class="s">"escape"</span><span class="p">,</span> <span class="s">"close"</span><span class="p">,</span> <span class="s">"Close"</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_state</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">app_state</span> <span class="o">=</span> <span class="n">app_state</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">all_items</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_gather_all_items</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">Input</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="s">"üîç Search agents, modes, rules, skills..."</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">"search"</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ListView</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">"results"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gather_all_items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Gather all searchable items from app state."""</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Agents
</span>        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">app_state</span><span class="p">.</span><span class="n">agents</span><span class="p">:</span>
            <span class="n">items</span><span class="p">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s">'type'</span><span class="p">:</span> <span class="s">'agent'</span><span class="p">,</span>
                <span class="s">'name'</span><span class="p">:</span> <span class="n">agent</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s">'icon'</span><span class="p">:</span> <span class="n">Icons</span><span class="p">.</span><span class="n">CODE</span><span class="p">,</span>
                <span class="s">'description'</span><span class="p">:</span> <span class="sa">f</span><span class="s">"Agent ‚Ä¢ </span><span class="si">{</span><span class="n">agent</span><span class="p">.</span><span class="n">category</span><span class="si">}</span><span class="s">"</span><span class="p">,</span>
                <span class="s">'action'</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">app</span><span class="p">.</span><span class="n">switch_view</span><span class="p">(</span><span class="s">'agents'</span><span class="p">,</span> <span class="n">agent</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
            <span class="p">})</span>

        <span class="c1"># Modes
</span>        <span class="k">for</span> <span class="n">mode</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">app_state</span><span class="p">.</span><span class="n">modes</span><span class="p">:</span>
            <span class="n">items</span><span class="p">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s">'type'</span><span class="p">:</span> <span class="s">'mode'</span><span class="p">,</span>
                <span class="s">'name'</span><span class="p">:</span> <span class="n">mode</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s">'icon'</span><span class="p">:</span> <span class="n">Icons</span><span class="p">.</span><span class="n">FILTER</span><span class="p">,</span>
                <span class="s">'description'</span><span class="p">:</span> <span class="sa">f</span><span class="s">"Mode ‚Ä¢ </span><span class="si">{</span><span class="n">mode</span><span class="p">.</span><span class="n">purpose</span><span class="si">}</span><span class="s">"</span><span class="p">,</span>
                <span class="s">'action'</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">app</span><span class="p">.</span><span class="n">switch_view</span><span class="p">(</span><span class="s">'modes'</span><span class="p">,</span> <span class="n">mode</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
            <span class="p">})</span>

        <span class="c1"># Skills
</span>        <span class="k">for</span> <span class="n">skill</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">app_state</span><span class="p">.</span><span class="n">skills</span><span class="p">:</span>
            <span class="n">items</span><span class="p">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s">'type'</span><span class="p">:</span> <span class="s">'skill'</span><span class="p">,</span>
                <span class="s">'name'</span><span class="p">:</span> <span class="n">skill</span><span class="p">[</span><span class="s">'name'</span><span class="p">],</span>
                <span class="s">'icon'</span><span class="p">:</span> <span class="n">Icons</span><span class="p">.</span><span class="n">CODE</span><span class="p">,</span>
                <span class="s">'description'</span><span class="p">:</span> <span class="sa">f</span><span class="s">"Skill ‚Ä¢ </span><span class="si">{</span><span class="n">skill</span><span class="p">[</span><span class="s">'category'</span><span class="p">]</span><span class="si">}</span><span class="s">"</span><span class="p">,</span>
                <span class="s">'action'</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">app</span><span class="p">.</span><span class="n">switch_view</span><span class="p">(</span><span class="s">'skills'</span><span class="p">,</span> <span class="n">skill</span><span class="p">[</span><span class="s">'name'</span><span class="p">])</span>
            <span class="p">})</span>

        <span class="k">return</span> <span class="n">items</span>

    <span class="k">def</span> <span class="nf">on_input_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="s">"""Filter items as user types."""</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="p">:</span>
            <span class="n">matches</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">all_items</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>  <span class="c1"># Show top 20 when empty
</span>        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Fuzzy match
</span>            <span class="n">scored</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">all_items</span><span class="p">:</span>
                <span class="n">score</span> <span class="o">=</span> <span class="n">fuzz</span><span class="p">.</span><span class="n">partial_ratio</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="s">'name'</span><span class="p">].</span><span class="n">lower</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">:</span>  <span class="c1"># Threshold
</span>                    <span class="n">scored</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">score</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span>

            <span class="n">matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">score</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">scored</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)[:</span><span class="mi">20</span><span class="p">]]</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">_update_results</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
        <span class="s">"""Update result list with matched items."""</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">query_one</span><span class="p">(</span><span class="s">"#results"</span><span class="p">,</span> <span class="n">ListView</span><span class="p">)</span>
        <span class="n">results</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="n">result_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">item</span><span class="p">[</span><span class="s">'icon'</span><span class="p">]</span><span class="si">}</span><span class="s"> [cyan]</span><span class="si">{</span><span class="n">item</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span><span class="si">}</span><span class="s">[/cyan] [dim]</span><span class="si">{</span><span class="n">item</span><span class="p">[</span><span class="s">'description'</span><span class="p">]</span><span class="si">}</span><span class="s">[/dim]"</span>
            <span class="n">results</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ListItem</span><span class="p">(</span><span class="n">Static</span><span class="p">(</span><span class="n">result_text</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="n">item</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="13-collapsible-sections">1.3 Collapsible Sections</h3>
<p><strong>File</strong>: Update <code class="language-plaintext highlighter-rouge">tui_textual.py</code></p>

<p><strong>The Surprise</strong>: Press <code class="language-plaintext highlighter-rouge">C</code> to collapse/expand sections in views with lots of data.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">textual.widgets</span> <span class="kn">import</span> <span class="n">Collapsible</span>

<span class="k">class</span> <span class="nc">EnhancedView</span><span class="p">(</span><span class="n">Vertical</span><span class="p">):</span>
    <span class="s">"""View with collapsible sections."""</span>

    <span class="k">def</span> <span class="nf">show_agent_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Show agents grouped by category with collapsing."""</span>
        <span class="n">categories</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">agents</span><span class="p">:</span>
            <span class="n">categories</span><span class="p">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">agent</span><span class="p">.</span><span class="n">category</span><span class="p">,</span> <span class="p">[]).</span><span class="n">append</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">category</span><span class="p">,</span> <span class="n">agents</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">with</span> <span class="n">Collapsible</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">FOLDER</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">category</span><span class="p">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">agents</span><span class="p">)</span><span class="si">}</span><span class="s">)"</span><span class="p">,</span> <span class="n">collapsed</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">AgentRow</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>
</code></pre></div></div>

<hr />

<h2 id="-phase-2-live-animations--real-time-updates-4-5-hours">üé® Phase 2: Live Animations &amp; Real-Time Updates (4-5 hours)</h2>

<h3 id="21-animated-progress-bars">2.1 Animated Progress Bars</h3>
<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">claude_ctx_py/tui_animations.py</code> (new)</p>

<p><strong>The Surprise</strong>: Progress bars animate smoothly and pulse when active.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">textual.reactive</span> <span class="kn">import</span> <span class="n">reactive</span>
<span class="kn">from</span> <span class="nn">textual.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="kn">from</span> <span class="nn">rich.console</span> <span class="kn">import</span> <span class="n">Console</span><span class="p">,</span> <span class="n">RenderableType</span>
<span class="kn">from</span> <span class="nn">rich.text</span> <span class="kn">import</span> <span class="n">Text</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">AnimatedProgressBar</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="s">"""Progress bar with smooth animations and pulse effect."""</span>

    <span class="n">progress</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">is_active</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">""</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">total</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">animation_frame</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="s">"""Render animated progress bar."""</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="n">filled</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="p">.</span><span class="n">progress</span> <span class="o">/</span> <span class="bp">self</span><span class="p">.</span><span class="n">total</span><span class="p">)</span> <span class="o">*</span> <span class="n">width</span><span class="p">)</span>
        <span class="n">empty</span> <span class="o">=</span> <span class="n">width</span> <span class="o">-</span> <span class="n">filled</span>

        <span class="c1"># Color based on progress
</span>        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">progress</span> <span class="o">&gt;=</span> <span class="mi">90</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s">"green"</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">progress</span> <span class="o">&gt;=</span> <span class="mi">70</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s">"yellow"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s">"blue"</span>

        <span class="c1"># Pulse effect for active progress
</span>        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">is_active</span><span class="p">:</span>
            <span class="n">pulse_chars</span> <span class="o">=</span> <span class="p">[</span><span class="s">"‚†ã"</span><span class="p">,</span> <span class="s">"‚†ô"</span><span class="p">,</span> <span class="s">"‚†π"</span><span class="p">,</span> <span class="s">"‚†∏"</span><span class="p">,</span> <span class="s">"‚†º"</span><span class="p">,</span> <span class="s">"‚†¥"</span><span class="p">,</span> <span class="s">"‚†¶"</span><span class="p">,</span> <span class="s">"‚†ß"</span><span class="p">,</span> <span class="s">"‚†á"</span><span class="p">,</span> <span class="s">"‚†è"</span><span class="p">]</span>
            <span class="n">pulse</span> <span class="o">=</span> <span class="n">pulse_chars</span><span class="p">[</span><span class="bp">self</span><span class="p">.</span><span class="n">animation_frame</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">pulse_chars</span><span class="p">)]</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[yellow]</span><span class="si">{</span><span class="n">pulse</span><span class="si">}</span><span class="s">[/yellow] "</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s">"  "</span>

        <span class="c1"># Gradient effect on filled portion
</span>        <span class="n">bar</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_create_gradient_bar</span><span class="p">(</span><span class="n">filled</span><span class="p">,</span> <span class="n">empty</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>

        <span class="n">pct</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">progress</span> <span class="o">/</span> <span class="bp">self</span><span class="p">.</span><span class="n">total</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
        <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s">[bold]</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="si">}</span><span class="s">[/bold] </span><span class="si">{</span><span class="n">bar</span><span class="si">}</span><span class="s"> [cyan]</span><span class="si">{</span><span class="n">pct</span><span class="si">:</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="si">}</span><span class="s">%[/cyan]"</span>

        <span class="k">return</span> <span class="n">Text</span><span class="p">.</span><span class="n">from_markup</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_gradient_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filled</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">empty</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s">"""Create a gradient-filled progress bar."""</span>
        <span class="c1"># Use different block characters for gradient effect
</span>        <span class="n">gradient_chars</span> <span class="o">=</span> <span class="p">[</span><span class="s">"‚ñè"</span><span class="p">,</span> <span class="s">"‚ñé"</span><span class="p">,</span> <span class="s">"‚ñç"</span><span class="p">,</span> <span class="s">"‚ñå"</span><span class="p">,</span> <span class="s">"‚ñã"</span><span class="p">,</span> <span class="s">"‚ñä"</span><span class="p">,</span> <span class="s">"‚ñâ"</span><span class="p">,</span> <span class="s">"‚ñà"</span><span class="p">]</span>

        <span class="n">bar_parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">filled</span><span class="p">):</span>
            <span class="c1"># Fade intensity from start to end
</span>            <span class="n">intensity</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">filled</span><span class="p">)</span>
            <span class="n">char_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">intensity</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">gradient_chars</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">bar_parts</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">gradient_chars</span><span class="p">[</span><span class="n">char_idx</span><span class="p">])</span>

        <span class="n">filled_str</span> <span class="o">=</span> <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">bar_parts</span><span class="p">)</span>
        <span class="n">empty_str</span> <span class="o">=</span> <span class="s">"‚ñë"</span> <span class="o">*</span> <span class="n">empty</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s">"[</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s">]</span><span class="si">{</span><span class="n">filled_str</span><span class="si">}</span><span class="s">[/</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s">][dim]</span><span class="si">{</span><span class="n">empty_str</span><span class="si">}</span><span class="s">[/dim]"</span>

    <span class="k">def</span> <span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Start animation timer."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">is_active</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">set_interval</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">_animate</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_animate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Update animation frame."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">animation_frame</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div></div>

<h3 id="22-live-metrics-dashboard">2.2 Live Metrics Dashboard</h3>
<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">claude_ctx_py/tui_dashboard.py</code> (new)</p>

<p><strong>The Surprise</strong>: Real-time system metrics with sparklines showing trends.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">textual.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="kn">from</span> <span class="nn">textual.reactive</span> <span class="kn">import</span> <span class="n">reactive</span>
<span class="kn">import</span> <span class="nn">psutil</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>

<span class="k">class</span> <span class="nc">LiveMetricCard</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="s">"""Live updating metric card with sparkline."""</span>

    <span class="n">value</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">icon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">""</span><span class="p">,</span> <span class="n">history_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">icon</span> <span class="o">=</span> <span class="n">icon</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">history</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="n">history_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_value</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="s">"""Update value and add to history."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">new_value</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">history</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="s">"""Render metric card with sparkline."""</span>
        <span class="c1"># Create sparkline from history
</span>        <span class="n">sparkline</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_create_sparkline</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">history</span><span class="p">))</span>

        <span class="c1"># Color based on value (assuming percentage)
</span>        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s">"green"</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mi">80</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s">"yellow"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s">"red"</span>

        <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"""
</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">icon</span><span class="si">}</span><span class="s"> [bold]</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="si">}</span><span class="s">[/bold]
[</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s"> bold]</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">value</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}{</span><span class="bp">self</span><span class="p">.</span><span class="n">unit</span><span class="si">}</span><span class="s">[/</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s"> bold]
[dim]</span><span class="si">{</span><span class="n">sparkline</span><span class="si">}</span><span class="s">[/dim]
        """</span>

        <span class="k">return</span> <span class="n">Panel</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">border_style</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_create_sparkline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s">"""Create ASCII sparkline from values."""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"‚îÄ"</span> <span class="o">*</span> <span class="mi">20</span>

        <span class="n">spark_chars</span> <span class="o">=</span> <span class="s">"‚ñÅ‚ñÇ‚ñÉ‚ñÑ‚ñÖ‚ñÜ‚ñá‚ñà"</span>

        <span class="n">min_val</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">max_val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">range_val</span> <span class="o">=</span> <span class="n">max_val</span> <span class="o">-</span> <span class="n">min_val</span>

        <span class="k">if</span> <span class="n">range_val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">spark_chars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

        <span class="n">sparkline</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="n">normalized</span> <span class="o">=</span> <span class="p">(</span><span class="n">val</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="o">/</span> <span class="n">range_val</span>
            <span class="n">char_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">normalized</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">spark_chars</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">sparkline</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">spark_chars</span><span class="p">[</span><span class="n">char_idx</span><span class="p">])</span>

        <span class="k">return</span> <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">sparkline</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SystemMetrics</span><span class="p">(</span><span class="n">Horizontal</span><span class="p">):</span>
    <span class="s">"""System metrics dashboard."""</span>

    <span class="k">def</span> <span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">LiveMetricCard</span><span class="p">(</span><span class="s">"CPU"</span><span class="p">,</span> <span class="s">"üî•"</span><span class="p">,</span> <span class="s">"%"</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">LiveMetricCard</span><span class="p">(</span><span class="s">"Memory"</span><span class="p">,</span> <span class="s">"üíæ"</span><span class="p">,</span> <span class="s">"%"</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">LiveMetricCard</span><span class="p">(</span><span class="s">"Agents"</span><span class="p">,</span> <span class="s">"ü§ñ"</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">LiveMetricCard</span><span class="p">(</span><span class="s">"Tasks"</span><span class="p">,</span> <span class="s">"üìã"</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Start updating metrics."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">set_interval</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">update_metrics</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Update all metric cards."""</span>
        <span class="n">cpu_card</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">query_one</span><span class="p">(</span><span class="s">"#cpu"</span><span class="p">,</span> <span class="n">LiveMetricCard</span><span class="p">)</span>
        <span class="n">mem_card</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">query_one</span><span class="p">(</span><span class="s">"#mem"</span><span class="p">,</span> <span class="n">LiveMetricCard</span><span class="p">)</span>

        <span class="n">cpu_card</span><span class="p">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">psutil</span><span class="p">.</span><span class="n">cpu_percent</span><span class="p">())</span>
        <span class="n">mem_card</span><span class="p">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">psutil</span><span class="p">.</span><span class="n">virtual_memory</span><span class="p">().</span><span class="n">percent</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="23-real-time-status-updates">2.3 Real-Time Status Updates</h3>
<p><strong>File</strong>: Update main TUI</p>

<p><strong>The Surprise</strong>: Status indicators pulse and update in real-time when tasks are running.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">LiveStatusIndicator</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="s">"""Pulsing status indicator for active items."""</span>

    <span class="n">status</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="s">"idle"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="s">"""Render with pulsing animation for active status."""</span>
        <span class="n">pulse_frames</span> <span class="o">=</span> <span class="p">[</span><span class="s">"‚óè"</span><span class="p">,</span> <span class="s">"‚óâ"</span><span class="p">,</span> <span class="s">"‚óã"</span><span class="p">,</span> <span class="s">"‚óâ"</span><span class="p">]</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">pulse_frames</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s">"running"</span><span class="p">:</span>
            <span class="n">char</span> <span class="o">=</span> <span class="n">pulse_frames</span><span class="p">[</span><span class="n">frame</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="sa">f</span><span class="s">"[yellow]</span><span class="si">{</span><span class="n">char</span><span class="si">}</span><span class="s">[/yellow] Running"</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s">"complete"</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="sa">f</span><span class="s">"[green]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">SUCCESS</span><span class="si">}</span><span class="s">[/green] Complete"</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s">"error"</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="sa">f</span><span class="s">"[red]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">ERROR</span><span class="si">}</span><span class="s">[/red] Error"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="sa">f</span><span class="s">"[dim]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">READY</span><span class="si">}</span><span class="s">[/dim] Idle"</span><span class="p">)</span>
</code></pre></div></div>

<hr />

<h2 id="-phase-3-interactive-enhancements-3-4-hours">‚ö° Phase 3: Interactive Enhancements (3-4 hours)</h2>

<h3 id="31-quick-action-menu">3.1 Quick Action Menu</h3>
<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">claude_ctx_py/tui_actions.py</code> (new)</p>

<p><strong>The Surprise</strong>: Press <code class="language-plaintext highlighter-rouge">/</code> or <code class="language-plaintext highlighter-rouge">?</code> to see contextual quick actions for the selected item.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">QuickActionMenu</span><span class="p">(</span><span class="n">ModalScreen</span><span class="p">):</span>
    <span class="s">"""Context-sensitive quick action menu."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">item_type</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">item</span> <span class="o">=</span> <span class="n">item</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="n">item_type</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_get_actions</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_get_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Get available actions for item type."""</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">item_type</span> <span class="o">==</span> <span class="s">"agent"</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="s">"Toggle"</span><span class="p">,</span> <span class="s">"Space"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">toggle_agent</span><span class="p">()),</span>
                <span class="p">(</span><span class="s">"Details"</span><span class="p">,</span> <span class="s">"D"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">show_details</span><span class="p">()),</span>
                <span class="p">(</span><span class="s">"View Files"</span><span class="p">,</span> <span class="s">"F"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">view_files</span><span class="p">()),</span>
                <span class="p">(</span><span class="s">"Dependencies"</span><span class="p">,</span> <span class="s">"Shift+D"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">show_deps</span><span class="p">()),</span>
                <span class="p">(</span><span class="s">"Copy Name"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">copy_name</span><span class="p">()),</span>
            <span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">item_type</span> <span class="o">==</span> <span class="s">"mode"</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="s">"Toggle"</span><span class="p">,</span> <span class="s">"Space"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">toggle_mode</span><span class="p">()),</span>
                <span class="p">(</span><span class="s">"Details"</span><span class="p">,</span> <span class="s">"D"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">show_details</span><span class="p">()),</span>
                <span class="p">(</span><span class="s">"View Source"</span><span class="p">,</span> <span class="s">"V"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">view_source</span><span class="p">()),</span>
                <span class="p">(</span><span class="s">"Copy Path"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">copy_path</span><span class="p">()),</span>
            <span class="p">]</span>

        <span class="k">return</span> <span class="n">actions</span>

    <span class="k">def</span> <span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Compose action menu."""</span>
        <span class="n">menu_items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">menu_items</span><span class="p">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">Static</span><span class="p">(</span><span class="sa">f</span><span class="s">"[cyan]</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s">[/cyan] </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s">"menu-item"</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">yield</span> <span class="n">Vertical</span><span class="p">(</span><span class="o">*</span><span class="n">menu_items</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">"action-menu"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="32-inline-searchfilter">3.2 Inline Search/Filter</h3>
<p><strong>File</strong>: Update views</p>

<p><strong>The Surprise</strong>: Press <code class="language-plaintext highlighter-rouge">/</code> to start typing and filter the current view in real-time.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FilterableView</span><span class="p">(</span><span class="n">Vertical</span><span class="p">):</span>
    <span class="s">"""View with live inline filtering."""</span>

    <span class="n">filter_text</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">Input</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="s">"üîç Type to filter..."</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">"filter"</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="s">"hidden"</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">"main-table"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="s">"""Handle filter activation."""</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">"/"</span><span class="p">:</span>
            <span class="n">filter_input</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">query_one</span><span class="p">(</span><span class="s">"#filter"</span><span class="p">,</span> <span class="n">Input</span><span class="p">)</span>
            <span class="n">filter_input</span><span class="p">.</span><span class="n">remove_class</span><span class="p">(</span><span class="s">"hidden"</span><span class="p">)</span>
            <span class="n">filter_input</span><span class="p">.</span><span class="n">focus</span><span class="p">()</span>
            <span class="n">event</span><span class="p">.</span><span class="n">prevent_default</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_input_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="s">"""Filter table as user types."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">filter_text</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">refresh_table</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">refresh_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Refresh table with filtered results."""</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">query_one</span><span class="p">(</span><span class="s">"#main-table"</span><span class="p">,</span> <span class="n">DataTable</span><span class="p">)</span>
        <span class="n">table</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">all_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">filter_text</span> <span class="ow">in</span> <span class="n">item</span><span class="p">.</span><span class="n">name</span><span class="p">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">table</span><span class="p">.</span><span class="n">add_row</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="p">.</span><span class="n">_format_row</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="33-sortable-columns">3.3 Sortable Columns</h3>
<p><strong>File</strong>: Update table views</p>

<p><strong>The Surprise</strong>: Click column headers to sort (ascending/descending).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">SortableTable</span><span class="p">(</span><span class="n">DataTable</span><span class="p">):</span>
    <span class="s">"""DataTable with sortable columns."""</span>

    <span class="n">sort_column</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">sort_reverse</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_column_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
        <span class="s">"""Handle column header click for sorting."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">sort_column</span> <span class="o">==</span> <span class="n">column</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">sort_reverse</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">.</span><span class="n">sort_reverse</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">sort_column</span> <span class="o">=</span> <span class="n">column</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">sort_reverse</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">sort_rows</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">sort_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Sort table rows by current column."""</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">rows</span><span class="p">)</span>
        <span class="n">col_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">columns</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">sort_column</span><span class="p">)</span>

        <span class="n">rows</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="n">col_idx</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">sort_reverse</span><span class="p">)</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">add_row</span><span class="p">(</span><span class="o">*</span><span class="n">row</span><span class="p">)</span>

        <span class="c1"># Update header to show sort direction
</span>        <span class="n">arrow</span> <span class="o">=</span> <span class="s">" ‚Üì"</span> <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">sort_reverse</span> <span class="k">else</span> <span class="s">" ‚Üë"</span>
        <span class="c1"># Update column header with arrow
</span></code></pre></div></div>

<hr />

<h2 id="-phase-4-visual-polish-2-3-hours">üíé Phase 4: Visual Polish (2-3 hours)</h2>

<h3 id="41-gradient-borders">4.1 Gradient Borders</h3>
<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">claude_ctx_py/tui_effects.py</code> (new)</p>

<p><strong>The Surprise</strong>: Panels have subtle gradient borders that shimmer.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">GradientPanel</span><span class="p">(</span><span class="n">Static</span><span class="p">):</span>
    <span class="s">"""Panel with animated gradient border."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">""</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">gradient_offset</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Start gradient animation."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">set_interval</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">_animate_gradient</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_animate_gradient</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Animate gradient offset."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">gradient_offset</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">gradient_offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="s">"""Render with gradient border."""</span>
        <span class="c1"># Use ANSI color gradients for border
</span>        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_get_gradient_colors</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">gradient_offset</span><span class="p">)</span>

        <span class="c1"># Apply to Panel border
</span>        <span class="k">return</span> <span class="n">Panel</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">content</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">title</span><span class="p">,</span>
            <span class="n">border_style</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># Rotate through colors
</span>            <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s">"on </span><span class="si">{</span><span class="n">colors</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s">"</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_gradient_colors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="s">"""Generate gradient color sequence."""</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">"cyan"</span><span class="p">,</span> <span class="s">"blue"</span><span class="p">,</span> <span class="s">"magenta"</span><span class="p">,</span> <span class="s">"cyan"</span><span class="p">]</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">offset</span> <span class="o">//</span> <span class="mi">90</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">colors</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">colors</span><span class="p">[(</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)]]</span>
</code></pre></div></div>

<h3 id="42-shadow-effects">4.2 Shadow Effects</h3>
<p><strong>File</strong>: Update panels</p>

<p><strong>The Surprise</strong>: Panels have subtle ‚Äúshadow‚Äù effects using Unicode block characters.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create_shadowed_panel</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">""</span><span class="p">):</span>
    <span class="s">"""Create panel with shadow effect."""</span>
    <span class="c1"># Add shadow characters around panel
</span>    <span class="n">shadow_char</span> <span class="o">=</span> <span class="s">"‚ñë"</span>

    <span class="n">panel</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">border_style</span><span class="o">=</span><span class="s">"cyan"</span><span class="p">)</span>

    <span class="c1"># Wrap with shadow layer
</span>    <span class="n">shadowed</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">panel</span><span class="si">}</span><span class="se">\n</span><span class="s">[dim]</span><span class="si">{</span><span class="n">shadow_char</span> <span class="o">*</span> <span class="p">(</span><span class="n">panel</span><span class="p">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s">[/dim]"</span>

    <span class="k">return</span> <span class="n">shadowed</span>
</code></pre></div></div>

<h3 id="43-focus-indicators">4.3 Focus Indicators</h3>
<p><strong>File</strong>: Update all interactive elements</p>

<p><strong>The Surprise</strong>: Focused items have animated focus rings.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FocusableRow</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="s">"""Row with animated focus indicator."""</span>

    <span class="n">has_focus</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">focus_intensity</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Start focus animation."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">has_focus</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">set_interval</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">_animate_focus</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_blur</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Stop focus animation."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">has_focus</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">_animate_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Pulse focus indicator."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">has_focus</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">focus_intensity</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">focus_intensity</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">%</span> <span class="mf">1.0</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="s">"""Render with focus effect."""</span>
        <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_get_content</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">has_focus</span><span class="p">:</span>
            <span class="c1"># Pulsing cyan border
</span>            <span class="n">intensity</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">focus_intensity</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span>
            <span class="n">border_color</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"rgb(</span><span class="si">{</span><span class="mi">0</span><span class="si">}</span><span class="s">,</span><span class="si">{</span><span class="n">intensity</span><span class="si">}</span><span class="s">,</span><span class="si">{</span><span class="n">intensity</span><span class="si">}</span><span class="s">)"</span>
            <span class="k">return</span> <span class="n">Panel</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">border_style</span><span class="o">=</span><span class="n">border_color</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">content</span>
</code></pre></div></div>

<h3 id="44-smooth-scroll-indicators">4.4 Smooth Scroll Indicators</h3>
<p><strong>File</strong>: Update scrollable views</p>

<p><strong>The Surprise</strong>: Scrollbars show position with mini-map preview.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">EnhancedScrollbar</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="s">"""Scrollbar with position indicator and mini-map."""</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="s">"""Render scrollbar with indicators."""</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span>
        <span class="n">content_height</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">parent</span><span class="p">.</span><span class="n">content_height</span>
        <span class="n">scroll_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">parent</span><span class="p">.</span><span class="n">scroll_y</span>

        <span class="c1"># Calculate visible portion
</span>        <span class="n">visible_ratio</span> <span class="o">=</span> <span class="n">height</span> <span class="o">/</span> <span class="n">content_height</span>
        <span class="n">thumb_height</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">height</span> <span class="o">*</span> <span class="n">visible_ratio</span><span class="p">))</span>
        <span class="n">thumb_pos</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">scroll_pos</span> <span class="o">/</span> <span class="n">content_height</span><span class="p">)</span> <span class="o">*</span> <span class="n">height</span><span class="p">)</span>

        <span class="c1"># Build scrollbar
</span>        <span class="n">chars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">thumb_pos</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">thumb_pos</span> <span class="o">+</span> <span class="n">thumb_height</span><span class="p">:</span>
                <span class="n">chars</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"[cyan]‚ñà[/cyan]"</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">chars</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"[dim]‚îÇ[/dim]"</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Text</span><span class="p">.</span><span class="n">from_markup</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">chars</span><span class="p">))</span>
</code></pre></div></div>

<hr />

<h2 id="-phase-5-surprising-features-4-5-hours">üéØ Phase 5: Surprising Features (4-5 hours)</h2>

<h3 id="51-mini-dashboard-cards">5.1 Mini Dashboard Cards</h3>
<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">claude_ctx_py/tui_cards.py</code> (new)</p>

<p><strong>The Surprise</strong>: Overview shows beautiful cards with live metrics.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MetricCard</span><span class="p">(</span><span class="n">Static</span><span class="p">):</span>
    <span class="s">"""Beautiful metric card with icon and trend."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">trend_data</span><span class="p">,</span> <span class="n">icon</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">"cyan"</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">trend_data</span> <span class="o">=</span> <span class="n">trend_data</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">icon</span> <span class="o">=</span> <span class="n">icon</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="s">"""Render card."""</span>
        <span class="c1"># Calculate trend
</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">trend_data</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">trend</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">trend_data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="p">.</span><span class="n">trend_data</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">trend_icon</span> <span class="o">=</span> <span class="s">"‚Üë"</span> <span class="k">if</span> <span class="n">trend</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">"‚Üì"</span> <span class="k">if</span> <span class="n">trend</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">"‚Üí"</span>
            <span class="n">trend_color</span> <span class="o">=</span> <span class="s">"green"</span> <span class="k">if</span> <span class="n">trend</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">"red"</span> <span class="k">if</span> <span class="n">trend</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">"dim"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">trend_icon</span> <span class="o">=</span> <span class="s">"‚Üí"</span>
            <span class="n">trend_color</span> <span class="o">=</span> <span class="s">"dim"</span>

        <span class="c1"># Create sparkline
</span>        <span class="n">sparkline</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_create_sparkline</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">trend_data</span><span class="p">)</span>

        <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"""
[bold </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">color</span><span class="si">}</span><span class="s">]</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">icon</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">title</span><span class="si">}</span><span class="s">[/bold </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">color</span><span class="si">}</span><span class="s">]

[bold white]</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">value</span><span class="si">}</span><span class="s">[/bold white]  [</span><span class="si">{</span><span class="n">trend_color</span><span class="si">}</span><span class="s">]</span><span class="si">{</span><span class="n">trend_icon</span><span class="si">}</span><span class="s">[/</span><span class="si">{</span><span class="n">trend_color</span><span class="si">}</span><span class="s">]

[dim]</span><span class="si">{</span><span class="n">sparkline</span><span class="si">}</span><span class="s">[/dim]
        """</span>

        <span class="k">return</span> <span class="n">Panel</span><span class="p">(</span>
            <span class="n">content</span><span class="p">,</span>
            <span class="n">border_style</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">color</span><span class="p">,</span>
            <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="n">height</span><span class="o">=</span><span class="mi">8</span>
        <span class="p">)</span>
</code></pre></div></div>

<h3 id="52-workflow-visualization">5.2 Workflow Visualization</h3>
<p><strong>File</strong>: Update workflows view</p>

<p><strong>The Surprise</strong>: Workflows show as beautiful timeline with branching paths.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">WorkflowVisualizer</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="s">"""Visual workflow timeline with branches."""</span>

    <span class="k">def</span> <span class="nf">render_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workflow</span><span class="p">):</span>
        <span class="s">"""Render workflow as visual timeline."""</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Header
</span>        <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s">"[bold cyan]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">PLAY</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">workflow</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">[/bold cyan]"</span><span class="p">)</span>
        <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>

        <span class="c1"># Timeline
</span>        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">workflow</span><span class="p">.</span><span class="n">steps</span><span class="p">):</span>
            <span class="n">is_last</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">workflow</span><span class="p">.</span><span class="n">steps</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">is_current</span> <span class="o">=</span> <span class="n">step</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'name'</span><span class="p">)</span> <span class="o">==</span> <span class="n">workflow</span><span class="p">.</span><span class="n">current_step</span>
            <span class="n">is_complete</span> <span class="o">=</span> <span class="n">step</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'status'</span><span class="p">)</span> <span class="o">==</span> <span class="s">'completed'</span>

            <span class="c1"># Connector
</span>            <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"  ‚îÇ"</span><span class="p">)</span>

            <span class="c1"># Step node
</span>            <span class="k">if</span> <span class="n">is_complete</span><span class="p">:</span>
                <span class="n">icon</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[green]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">SUCCESS</span><span class="si">}</span><span class="s">[/green]"</span>
                <span class="n">connector</span> <span class="o">=</span> <span class="s">"‚îú‚îÄ"</span>
            <span class="k">elif</span> <span class="n">is_current</span><span class="p">:</span>
                <span class="n">icon</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[yellow]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">RUNNING</span><span class="si">}</span><span class="s">[/yellow]"</span>
                <span class="n">connector</span> <span class="o">=</span> <span class="s">"‚îú‚îÄ"</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">icon</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[dim]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">READY</span><span class="si">}</span><span class="s">[/dim]"</span>
                <span class="n">connector</span> <span class="o">=</span> <span class="s">"‚îú‚îÄ"</span>

            <span class="k">if</span> <span class="n">is_last</span><span class="p">:</span>
                <span class="n">connector</span> <span class="o">=</span> <span class="s">"‚îî‚îÄ"</span>

            <span class="c1"># Build step line
</span>            <span class="n">step_line</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"  </span><span class="si">{</span><span class="n">connector</span><span class="si">}{</span><span class="n">icon</span><span class="si">}</span><span class="s"> [bold]</span><span class="si">{</span><span class="n">step</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span><span class="si">}</span><span class="s">[/bold]"</span>

            <span class="k">if</span> <span class="n">step</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'duration'</span><span class="p">):</span>
                <span class="n">step_line</span> <span class="o">+=</span> <span class="sa">f</span><span class="s">" [dim](</span><span class="si">{</span><span class="n">Format</span><span class="p">.</span><span class="n">duration</span><span class="p">(</span><span class="n">step</span><span class="p">[</span><span class="s">'duration'</span><span class="p">])</span><span class="si">}</span><span class="s">)[/dim]"</span>

            <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">step_line</span><span class="p">)</span>

            <span class="c1"># Show parallel branches if any
</span>            <span class="k">if</span> <span class="n">step</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'parallel'</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">parallel_step</span> <span class="ow">in</span> <span class="n">step</span><span class="p">[</span><span class="s">'parallel'</span><span class="p">]:</span>
                    <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s">"  ‚îÇ  ‚îú‚îÄ </span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">BRANCH</span><span class="si">}</span><span class="s"> [dim]</span><span class="si">{</span><span class="n">parallel_step</span><span class="si">}</span><span class="s">[/dim]"</span><span class="p">)</span>

        <span class="k">return</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="53-dependency-graph-viewer">5.3 Dependency Graph Viewer</h3>
<p><strong>File</strong>: Update detail view</p>

<p><strong>The Surprise</strong>: Press <code class="language-plaintext highlighter-rouge">G</code> to see beautiful dependency graph in detail panel.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">InteractiveDependencyGraph</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="s">"""Interactive dependency graph with expansion."""</span>

    <span class="n">expanded_nodes</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">(</span><span class="nb">set</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">render_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">):</span>
        <span class="s">"""Render interactive graph."""</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Root node (highlighted)
</span>        <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s">"[bold cyan on blue] </span><span class="si">{</span><span class="n">root</span><span class="si">}</span><span class="s"> [/bold cyan on blue]"</span><span class="p">)</span>
        <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"‚îÇ"</span><span class="p">)</span>

        <span class="c1"># Dependencies with expand/collapse
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">_render_dependencies</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>

        <span class="k">return</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_render_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">deps</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
        <span class="s">"""Recursively render dependencies."""</span>
        <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">deps</span><span class="p">.</span><span class="n">items</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">children</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="n">is_last</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">is_expanded</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">expanded_nodes</span>

            <span class="c1"># Connector
</span>            <span class="n">connector</span> <span class="o">=</span> <span class="s">"‚îî‚îÄ‚îÄ"</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s">"‚îú‚îÄ‚îÄ"</span>

            <span class="c1"># Expand/collapse indicator
</span>            <span class="k">if</span> <span class="n">children</span><span class="p">:</span>
                <span class="n">indicator</span> <span class="o">=</span> <span class="s">"‚ñº"</span> <span class="k">if</span> <span class="n">is_expanded</span> <span class="k">else</span> <span class="s">"‚ñ∂"</span>
                <span class="n">name_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[cyan]</span><span class="si">{</span><span class="n">indicator</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">[/cyan]"</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[dim]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">FILE</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">[/dim]"</span>

            <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">connector</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">name_text</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

            <span class="c1"># Show children if expanded
</span>            <span class="k">if</span> <span class="n">is_expanded</span> <span class="ow">and</span> <span class="n">children</span><span class="p">:</span>
                <span class="n">new_prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="p">(</span><span class="s">"    "</span> <span class="k">if</span> <span class="n">is_last</span> <span class="k">else</span> <span class="s">"‚îÇ   "</span><span class="p">)</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">_render_dependencies</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">children</span><span class="p">,</span> <span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">new_prefix</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="54-performance-monitor">5.4 Performance Monitor</h3>
<p><strong>File</strong>: Add to status bar</p>

<p><strong>The Surprise</strong>: Status bar shows live performance metrics with sparklines.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">LiveStatusBar</span><span class="p">(</span><span class="n">Static</span><span class="p">):</span>
    <span class="s">"""Enhanced status bar with live metrics."""</span>

    <span class="k">def</span> <span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">set_interval</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">update_metrics</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Update all metrics."""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="s">"""Render status bar with live data."""</span>
        <span class="c1"># Current view
</span>        <span class="n">view_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[cyan]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">FOLDER</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">app</span><span class="p">.</span><span class="n">current_view</span><span class="p">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s">[/cyan]"</span>

        <span class="c1"># Active items
</span>        <span class="n">active_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">app</span><span class="p">.</span><span class="n">agents</span> <span class="k">if</span> <span class="n">a</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s">"active"</span><span class="p">)</span>
        <span class="n">items_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[green]</span><span class="si">{</span><span class="n">Icons</span><span class="p">.</span><span class="n">SUCCESS</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">active_count</span><span class="si">}</span><span class="s"> active[/green]"</span>

        <span class="c1"># System metrics with sparklines
</span>        <span class="n">cpu</span> <span class="o">=</span> <span class="n">psutil</span><span class="p">.</span><span class="n">cpu_percent</span><span class="p">()</span>
        <span class="n">cpu_spark</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_mini_sparkline</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">app</span><span class="p">.</span><span class="n">cpu_history</span><span class="p">)</span>
        <span class="n">cpu_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[yellow]CPU </span><span class="si">{</span><span class="n">cpu</span><span class="si">:</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="si">}</span><span class="s">% </span><span class="si">{</span><span class="n">cpu_spark</span><span class="si">}</span><span class="s">[/yellow]"</span>

        <span class="c1"># Time
</span>        <span class="n">time_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"[dim]</span><span class="si">{</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%H</span><span class="si">:</span><span class="o">%</span><span class="n">M</span><span class="si">:</span><span class="o">%</span><span class="n">S</span><span class="s">')</span><span class="si">}</span><span class="s">[/dim]"</span>

        <span class="c1"># Keyboard hints
</span>        <span class="n">hints</span> <span class="o">=</span> <span class="s">"[dim]?[/dim] [cyan]Help[/cyan]"</span>

        <span class="c1"># Combine with separators
</span>        <span class="n">parts</span> <span class="o">=</span> <span class="p">[</span><span class="n">view_text</span><span class="p">,</span> <span class="n">items_text</span><span class="p">,</span> <span class="n">cpu_text</span><span class="p">,</span> <span class="n">time_text</span><span class="p">,</span> <span class="n">hints</span><span class="p">]</span>
        <span class="k">return</span> <span class="s">" [dim]‚îÇ[/dim] "</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_mini_sparkline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="s">"""Create tiny sparkline (5 chars)."""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"</span>

        <span class="n">chars</span> <span class="o">=</span> <span class="s">"‚ñÅ‚ñÉ‚ñÖ‚ñá‚ñà"</span>
        <span class="n">recent</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>

        <span class="n">min_val</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">recent</span><span class="p">)</span>
        <span class="n">max_val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">recent</span><span class="p">)</span>
        <span class="n">range_val</span> <span class="o">=</span> <span class="n">max_val</span> <span class="o">-</span> <span class="n">min_val</span> <span class="ow">or</span> <span class="mi">1</span>

        <span class="n">spark</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">recent</span><span class="p">:</span>
            <span class="n">normalized</span> <span class="o">=</span> <span class="p">(</span><span class="n">val</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="o">/</span> <span class="n">range_val</span>
            <span class="n">char_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">normalized</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">spark</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">chars</span><span class="p">[</span><span class="n">char_idx</span><span class="p">])</span>

        <span class="k">return</span> <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">spark</span><span class="p">)</span>
</code></pre></div></div>

<hr />

<h2 id="-implementation-checklist">üìã Implementation Checklist</h2>

<h3 id="week-1-core-features">Week 1: Core Features</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Split-pane detail view with sliding animation</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Command palette with fuzzy search</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Collapsible sections</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Animated progress bars with pulse</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Live metrics dashboard</li>
</ul>

<h3 id="week-2-interactive-features">Week 2: Interactive Features</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Quick action menu</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Inline search/filter</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Sortable columns</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Focus animations</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Gradient effects</li>
</ul>

<h3 id="week-3-surprising-features">Week 3: Surprising Features</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Metric cards with sparklines</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Workflow visualizer</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Dependency graph viewer</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Live status bar with metrics</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Mini-map navigation</li>
</ul>

<hr />

<h2 id="-visual-highlights">üé® Visual Highlights</h2>

<p><strong>Before</strong>: Static table with basic text
<strong>After</strong>:</p>
<ul>
  <li>‚ú® Animated pulsing progress bars</li>
  <li>üìä Live sparklines showing trends</li>
  <li>üéØ Context-sensitive quick actions</li>
  <li>üîç Fuzzy searchable command palette</li>
  <li>üìà Real-time metrics dashboard</li>
  <li>üé¨ Smooth animations and transitions</li>
  <li>üåà Gradient borders and effects</li>
</ul>

<hr />

<h2 id="ready-to-implement">Ready to implement?</h2>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/claude-ctx-plugin/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Claude CTX Plugin</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Claude CTX Plugin</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Comprehensive context management plugin for Claude Code</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
